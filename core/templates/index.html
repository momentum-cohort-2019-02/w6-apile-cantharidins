{% extends "base.html" %}

{% block content %}
<div>

    <h2 class="flex justify-center"><a href="{% url 'post_new' %}">Post something awesome!</a></h2>
    
        {% if post_list %}
        <ul class="">
            {% for post in post_list %}
                <li class="b--solid ma1 bg-light-yellow list justify-between">
                    <div class="w-100">
                    <a class=" ml2 w-30 f3 black" href="{% url 'post_detail' slug=post.slug %}">{{ post.title }}</a>
                    {{ post.post_url|urlizetrunc:20 }}
                    </div>
                    <div class="flex ml2">
                    <p class="ml2 w-100">{{ post.description }}</p>
                    <p class="ml2 mr2 ">{{ post.date_posted }}</p>
                    <p class="ml2 mr2 ">{{ post.user }}</p>
                    <p class="ml2 mr2">{{ post.comment_set.count }} comment(s)</p>
                    </div>
                    

                    <p class="ml2 mr2">This post has {{ post.voted_by.count }} vote(s)!</p>
                    {% if request.user.is_authenticated %}
                        {% if request.user == post.user %}
                        <button><a class="" href="{% url 'post_remove' post.slug %}">Delete Post</button>
                        {% endif %}
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>There are no posts on the site.</p> 
        {% endif %}

</div>





{% endblock %}